# ANTIGRAVITY_RULES.md - Tokitoto77 Portfolio LP
**適用範囲**: このファイルはリポジトリ全体（`/`）に適用します。  
**用途**: Antigravity 用のプロジェクトルール。

## プロジェクト構成
- フロントエンド: 静的LP（`index.html`, `css/`, `js/`）
- バックエンド: Google Apps Script（`backend/Code.gs`）

## 作業ルール
1. 変更は依頼範囲に限定し、最小限で行う。
2. 関係ないファイルは編集しない。
3. 挙動に影響する変更をした場合は、同タスク内で関連ドキュメント（`backend/Readme.md` など）も更新する。

## セキュリティルール（最優先）
1. 秘密情報（シークレット、トークン、APIキー、個人メールアドレス）をソースに直書きしない。
2. GASでは秘密情報と実行時設定を必ず `PropertiesService` から読む。
3. 速度・手軽さと衝突した場合は、セキュリティを優先し理由を説明する。
4. AI API連携は、ブラウザから秘密情報を直接扱わず、まずサーバー側プロキシを実装する。

## GASルール
1. 新しい設定値は Script Properties で管理する。
2. `backend/Code.gs` を変更した場合、回答に Script Properties の設定/更新手順を必ず含める。
3. GAS関連タスクの案内は、最後を `What you do now` で締める。
4. スプレッドシート/カレンダーの破壊的操作は、明示依頼がない限り実施しない。

## フロントエンドルール
1. 明示的な依頼がない限り、既存のデザイン方向性を維持する。
2. 既存構成に合わせる（デフォルトでフレームワーク移行しない）。
3. 最低限のアクセシビリティを守る（ラベル、キーボード操作、可読コントラスト）。
4. `js/main.js` と GAS エンドポイント設定の予約導線を壊さない。

## ファイル制約
- 明示依頼がない限り触らない:
  - `.git/**`
  - `sample-lp/**`（参照用アセット）
- 通常作業で編集可:
  - `index.html`
  - `css/**`
  - `js/**`
  - `backend/**`
  - `AGENTS.md`
  - `ANTIGRAVITY_RULES.md`

## 完了前チェック
1. 追跡対象ファイルに秘密情報を追加していないことを確認する。
2. 編集対象パスが依頼スコープ内であることを確認する。
3. フロント変更時は、表示と主要導線の簡易確認を行う。
4. GAS変更時は、`doPost` などが想定ペイロードキーを処理できることを確認する。
